# üê≥ Docker + Railway: –¢–µ—Å—Ç—ã —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. Dockerfile.telegram –∏ Dockerfile.backend
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª–æ–≤–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ `RUN_TESTS`
- ‚úÖ Entrypoint —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ stdout/stderr

### 2. run_tests.py
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ JSON
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –∫–æ–¥–∞ –≤—ã—Ö–æ–¥–∞ –¥–ª—è CI/CD

### 3. –¢–µ—Å—Ç—ã
- ‚úÖ `test_forsight_price.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω—ã –§–æ—Ä—Å–∞–π—Ç-—Å–µ—Å—Å–∏–∏
- ‚úÖ `test_langgraph_rag.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ LangGraph RAG

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ Railway

### –í–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**Railway Dashboard** ‚Üí **Variables** ‚Üí –î–æ–±–∞–≤—å—Ç–µ:

```bash
RUN_TESTS=true
```

–¢–µ—Å—Ç—ã –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ª–æ–≥–∞—Ö.

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

1. **Railway Dashboard** ‚Üí **Deployments**
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Logs**
4. –ò—â–∏—Ç–µ —Å–µ–∫—Ü–∏—é:

```
üß™ –¢–ï–°–¢: test_forsight_price
‚úÖ –¢–ï–°–¢ test_forsight_price: –ü–†–û–ô–î–ï–ù
üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é

```bash
# –ß–µ—Ä–µ–∑ Railway CLI
railway run python run_tests.py

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
railway run python test_forsight_price.py
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Dockerfile.telegram
‚îú‚îÄ‚îÄ –ö–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ Python —Ñ–∞–π–ª—ã (–≤–∫–ª—é—á–∞—è —Ç–µ—Å—Ç—ã)
‚îú‚îÄ‚îÄ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ –°–æ–∑–¥–∞–µ—Ç entrypoint.sh
‚îî‚îÄ‚îÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ RUN_TESTS=true) ‚Üí –∑–∞—Ç–µ–º app.py

run_tests.py
‚îú‚îÄ‚îÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç test_forsight_price.py
‚îú‚îÄ‚îÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç test_langgraph_rag.py
‚îú‚îÄ‚îÄ –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îî‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ /tmp/test_results.json
```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
QDRANT_URL=https://your-cluster.gcp.cloud.qdrant.io
QDRANT_API_KEY=your_api_key
OPENROUTER_API_KEY=your_key

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
RUN_TESTS=true  # –í–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
```

## üìä –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤

```
2026-01-08 19:00:00 - INFO - ======================================================================
2026-01-08 19:00:00 - INFO - üöÄ –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í –ù–ê RAILWAY
2026-01-08 19:00:00 - INFO - ======================================================================
2026-01-08 19:00:00 - INFO - –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: 2026-01-08T19:00:00
2026-01-08 19:00:00 - INFO - 
2026-01-08 19:00:00 - INFO - ======================================================================
2026-01-08 19:00:00 - INFO - üß™ –¢–ï–°–¢: test_forsight_price
2026-01-08 19:00:00 - INFO - ======================================================================
2026-01-08 19:00:05 - INFO - ‚úÖ –¢–ï–°–¢ test_forsight_price: –ü–†–û–ô–î–ï–ù
2026-01-08 19:00:05 - INFO - ======================================================================
2026-01-08 19:00:05 - INFO - üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢
2026-01-08 19:00:05 - INFO - ======================================================================
2026-01-08 19:00:05 - INFO - –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 2
2026-01-08 19:00:05 - INFO - ‚úÖ –ü—Ä–æ—à–ª–æ: 2
2026-01-08 19:00:05 - INFO - ‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 0
2026-01-08 19:00:05 - INFO - ======================================================================
2026-01-08 19:00:05 - INFO - ‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´
2026-01-08 19:00:05 - INFO - üíæ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/test_results.json
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç—ã

```bash
RUN_TESTS=false
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`).

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_*.py`
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `run_tests.py`:

```python
test_files = [
    ("test_forsight_price", "test_forsight_price.py"),
    ("test_langgraph_rag", "test_langgraph_rag.py"),
    ("test_new_feature", "test_new_feature.py"),  # –ù–æ–≤—ã–π —Ç–µ—Å—Ç
]
```

## üêõ Troubleshooting

### –¢–µ—Å—Ç—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `RUN_TESTS=true` –≤ Railway Variables
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `run_tests.py` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Qdrant
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö

1. `PYTHONUNBUFFERED=1` —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Dockerfile
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–µ—Å—Ç—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ
3. –î–æ–±–∞–≤—å—Ç–µ `time.sleep(1)` –≤ —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–æ–¥–∞–∫—à–µ–Ω:** `RUN_TESTS=false` (–Ω–µ –∑–∞–º–µ–¥–ª—è–µ—Ç –¥–µ–ø–ª–æ–π)
2. **Staging:** `RUN_TESTS=true` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º)
3. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `railway_test_config.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `RAILWAY_TESTS.md` - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `test_forsight_price.py` - –¢–µ—Å—Ç —Ü–µ–Ω—ã –§–æ—Ä—Å–∞–π—Ç-—Å–µ—Å—Å–∏–∏
- `test_langgraph_rag.py` - –¢–µ—Å—Ç LangGraph RAG
- `run_tests.py` - –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
