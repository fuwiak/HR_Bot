# üß™ –¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—á—Ç—ã

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã (–±–µ–∑ pytest)

**–§–∞–π–ª:** `test_email_simple.py`

**–ó–∞–ø—É—Å–∫:**
```bash
python test_email_simple.py
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç credentials)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Å—å–º–∞–º–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø–∏—Å–µ–º
- ‚úÖ –ö—ç—à –ø–∏—Å–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üß™ –ü–†–û–°–¢–´–ï –¢–ï–°–¢–´ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê –ü–û–ß–¢–´
======================================================================

üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
‚úÖ YANDEX_EMAIL: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
‚úÖ YANDEX_PASSWORD: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
‚úÖ TELEGRAM_ADMIN_ID: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

üîç –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ—á—Ç—ã
‚úÖ –ù–∞–π–¥–µ–Ω–æ –ø–∏—Å–µ–º: 1
  1. –û—Ç: test@client.com
     –¢–µ–º–∞: –¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ
     –î–∞—Ç–∞: 19 Dec 2025 15:46:00 +0300

üîç –¢–µ—Å—Ç 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚úÖ –ü–∏—Å—å–º–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –∫—ç—à
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

...

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: 5/5

üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!
```

---

### 2. –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Å pytest)

**–§–∞–π–ª:** `test_email_monitoring.py`

**–ó–∞–ø—É—Å–∫:**
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest test_email_monitoring.py -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest test_email_monitoring.py::test_send_email_notification -v

# –° –≤—ã–≤–æ–¥–æ–º print
pytest test_email_monitoring.py -v -s
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ `test_check_new_emails` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º
- ‚úÖ `test_send_email_notification` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ `test_handle_email_reply` - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ `test_handle_email_proposal` - —Å–æ–∑–¥–∞–Ω–∏–µ –ö–ü
- ‚úÖ `test_handle_email_task` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- ‚úÖ `test_handle_email_create_task` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ WEEEK
- ‚úÖ `test_email_monitor_task` - —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- ‚úÖ `test_email_check_command` - –∫–æ–º–∞–Ω–¥–∞ /email_check
- ‚úÖ `test_email_workflow_integration` - –ø–æ–ª–Ω—ã–π workflow

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python test_email_simple.py
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç pytest
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å pytest

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pytest –µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
pip install pytest pytest-asyncio

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
pytest test_email_monitoring.py -v
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫–∏ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö credentials)
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ CI/CD

---

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–µ—Å—Ç—ã

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ IMAP
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∏—Å–µ–º
- –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –ø–∏—Å—å–º–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º

### ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Å—å–º–∞–º–∏
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ LLM)
- –°–æ–∑–¥–∞–Ω–∏–µ –ö–ü (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ LLM)
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ WEEEK
- –ü–æ–∫–∞–∑ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –û—Ç–º–µ—Ç–∫–∞ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ

### ‚úÖ –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö

---

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤:
```env
YANDEX_EMAIL=a-novoselova07@yandex.ru
YANDEX_PASSWORD=your_password
TELEGRAM_ADMIN_ID=5305427956
```

### –î–ª—è pytest —Ç–µ—Å—Ç–æ–≤:
```bash
pip install pytest pytest-asyncio
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

### –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç:
```
üîç –¢–µ—Å—Ç: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚úÖ test_send_email_notification: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: –ü–†–û–ô–î–ï–ù
```

### –û—à–∏–±–∫–∞:
```
üîç –¢–µ—Å—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º
‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–∏—Å–µ–º: –û–®–ò–ë–ö–ê - Connection refused
Traceback (most recent call last):
  ...
```

---

## üêõ Troubleshooting

### "ModuleNotFoundError: No module named 'pytest'"

```bash
pip install pytest pytest-asyncio
```

### "YANDEX_EMAIL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
YANDEX_EMAIL=your_email@yandex.ru
YANDEX_PASSWORD=your_password
```

### "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø–æ—á—Ç–µ"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ 2FA)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ IMAP –≤ `.env`

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã: `python test_email_simple.py`
- [ ] Pytest —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã: `pytest test_email_monitoring.py -v`
- [ ] –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—á—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Å—å–º–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- [ ] –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—á—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Å—å–º–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- ‚úÖ –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –∑–∞–ø—É—â–µ–Ω–∞

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ! üöÄ**
