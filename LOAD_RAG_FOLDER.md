# üìÇ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–ø–∫–∏ /RAG HR-Business-Consultant –≤ Qdrant

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

–ó–∞–≥—Ä—É–∂–∞–µ—Ç **–≤—Å–µ —Ñ–∞–π–ª—ã** –∏–∑ –ø–∞–ø–∫–∏ `/RAG HR-Business-Consultant` (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∞–ø–∫–∏) –≤ Qdrant –∫–æ–ª–ª–µ–∫—Ü–∏—é `hr2137_bot_knowledge_base`.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–¥–ø–∞–ø–∫–∏
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ñ–∞–π–ª—ã —Å –æ—à–∏–±–∫–∞–º–∏ (–Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è RAG
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å

---

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- üìù –¢–µ–∫—Å—Ç: `.txt`, `.md`
- üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã: `.pdf`, `.docx`
- üìä –¢–∞–±–ª–∏—Ü—ã: `.xlsx`, `.xls`, `.csv`
- üíæ –î–∞–Ω–Ω—ã–µ: `.json`, `.xml`

---

## üöÄ –ó–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–ø—Ä–æ—â–µ)

```bash
# –î–∞—Ç—å –ø—Ä–∞–≤–∞
chmod +x start_rag_loader.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
./start_rag_loader.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞–ø—Ä—è–º—É—é

```bash
python3 load_rag_folder.py
```

---

## üìä –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

```
üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø–∞–ø–∫–∏: /RAG HR-Business-Consultant
üì¶ –ö–æ–ª–ª–µ–∫—Ü–∏—è Qdrant: hr2137_bot_knowledge_base
======================================================================

üìÇ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏: /RAG HR-Business-Consultant
üìÇ /RAG HR-Business-Consultant: –Ω–∞–π–¥–µ–Ω–æ 25 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
üìÅ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∞–ø–∫–∏: –î–æ–∫—É–º–µ–Ω—Ç—ã
üìÇ /RAG HR-Business-Consultant/–î–æ–∫—É–º–µ–Ω—Ç—ã: –Ω–∞–π–¥–µ–Ω–æ 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
...

üìä –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 35
üìÑ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤: 30

üîß –ù–∞—á–∏–Ω–∞–µ–º –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é...

======================================================================
[1/30] –§–∞–π–ª: –î–æ–≥–æ–≤–æ—Ä.pdf
======================================================================
üìÑ –û–±—Ä–∞–±–æ—Ç–∫–∞: –î–æ–≥–æ–≤–æ—Ä.pdf
üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: –î–æ–≥–æ–≤–æ—Ä.pdf
üìù –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞: –î–æ–≥–æ–≤–æ—Ä.pdf
‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ 5432 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –î–æ–≥–æ–≤–æ—Ä.pdf
üì¶ –°–æ–∑–¥–∞–Ω–æ 6 —á–∞–Ω–∫–æ–≤ –∏–∑ –î–æ–≥–æ–≤–æ—Ä.pdf
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 6 —Ç–æ—á–µ–∫ (1-6 –∏–∑ 6) –¥–ª—è –î–æ–≥–æ–≤–æ—Ä.pdf
üéâ –§–∞–π–ª –î–æ–≥–æ–≤–æ—Ä.pdf —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω (6 —Ç–æ—á–µ–∫)
‚úÖ [1] –£—Å–ø–µ—à–Ω–æ: –î–æ–≥–æ–≤–æ—Ä.pdf

======================================================================
[2/30] –§–∞–π–ª: –û—Ç—á–µ—Ç.xlsx
======================================================================
...

======================================================================
üìä –ò–¢–û–ì–ò
======================================================================
‚úÖ –£—Å–ø–µ—à–Ω–æ: 28
‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ: 2
‚ùå –û—à–∏–±–æ–∫: 0
üìÑ –í—Å–µ–≥–æ: 30

üéâ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

---

## üìù –õ–æ–≥–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ **`load_rag_folder.log`**:

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f load_rag_folder.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 load_rag_folder.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" load_rag_folder.log
grep "‚ùå" load_rag_folder.log

# –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
grep "‚úÖ.*–£—Å–ø–µ—à–Ω–æ:" load_rag_folder.log
```

---

## üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞–ø–∫—É

–í `load_rag_folder.py`:

```python
# –°—Ç—Ä–æ–∫–∞ 29
FOLDER_PATH = "/RAG HR-Business-Consultant"

# –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞:
FOLDER_PATH = "/–î—Ä—É–≥–∞—è –ø–∞–ø–∫–∞"
FOLDER_PATH = "/"  # –í—Å—è –∫–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞
```

### –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é

```python
# –°—Ç—Ä–æ–∫–∞ 32
COLLECTION_NAME = "hr2137_bot_knowledge_base"

# –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞:
COLLECTION_NAME = "my_custom_collection"
```

### –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã

```python
# –°—Ç—Ä–æ–∫–∞ 35
SUPPORTED_EXTENSIONS = {'.txt', '.md', '.pdf', '.docx', '.xlsx', '.xls', '.csv', '.json', '.xml'}

# –î–æ–±–∞–≤–∏—Ç—å:
SUPPORTED_EXTENSIONS.add('.pptx')
SUPPORTED_EXTENSIONS.add('.odt')
```

---

## ‚ö†Ô∏è –ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ

1. **–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
   - `.doc` (—Å—Ç–∞—Ä—ã–π Word)
   - `.zip`, `.rar` (–∞—Ä—Ö–∏–≤—ã)
   - `.jpg`, `.png` (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

2. **–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã:**
   - –ë–æ–ª—å—à–µ 50 –ú–ë

3. **–§–∞–π–ª—ã –±–µ–∑ —Ç–µ–∫—Å—Ç–∞:**
   - –ü—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã
   - –§–∞–π–ª—ã —Å < 50 —Å–∏–º–≤–æ–ª–∞–º–∏
   - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

4. **–û—à–∏–±–∫–∏ —á—Ç–µ–Ω–∏—è:**
   - –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
   - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ PDF/DOCX
   - –û—à–∏–±–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

**‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç –ù–ï –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ!** –û–Ω –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Qdrant:

```python
from qdrant_helper import get_qdrant_client

client = get_qdrant_client()

# –í—Å–µ–≥–æ —Ç–æ—á–µ–∫
count = client.count(collection_name="hr2137_bot_knowledge_base")
print(f"–í—Å–µ–≥–æ —Ç–æ—á–µ–∫: {count.count}")

# –¢–æ—á–∫–∏ –∏–∑ RAG –ø–∞–ø–∫–∏
results = client.scroll(
    collection_name="hr2137_bot_knowledge_base",
    scroll_filter={
        "must": [
            {"key": "source", "match": {"value": "yadisk_rag_folder"}}
        ]
    },
    limit=10
)

print(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ RAG –ø–∞–ø–∫–∏: {len(results[0])} —Ñ–∞–π–ª–æ–≤")
for point in results[0]:
    print(f"  - {point.payload['file_name']}")
```

---

### –í –±–æ—Ç–µ Telegram:

```bash
/search –¥–æ–≥–æ–≤–æ—Ä
/search –æ—Ç—á–µ—Ç
/search –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è
```

–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –ø–∞–ø–∫–∏!

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "SSL Certificate Error"

‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ! –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `verify=False` –¥–ª—è requests.

### "YANDEX_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
cat .env | grep YANDEX_TOKEN

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# YANDEX_TOKEN=y0__xDwj...
```

### "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Qdrant"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials
./check_env.sh

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ‚úÖ QDRANT_URL: ustawiony
# ‚úÖ QDRANT_API_KEY: ustawiony
```

### "–ü–∞–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ:

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
python3 -c "
import requests
TOKEN = 'y0__xDwj...'
headers = {'Authorization': f'OAuth {TOKEN}'}
response = requests.get(
    'https://cloud-api.yandex.net/v1/disk/resources',
    headers=headers,
    params={'path': '/RAG HR-Business-Consultant'},
    verify=False
)
print(response.status_code)
print(response.json() if response.status_code == 200 else response.text)
"
```

---

## ‚è±Ô∏è –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–π–º–µ—Ç?

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤:**

- 10 —Ñ–∞–π–ª–æ–≤: ~2-3 –º–∏–Ω—É—Ç—ã
- 30 —Ñ–∞–π–ª–æ–≤: ~5-10 –º–∏–Ω—É—Ç
- 100 —Ñ–∞–π–ª–æ–≤: ~20-30 –º–∏–Ω—É—Ç

**–ù–∞ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª:**
1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: 1-5 —Å–µ–∫—É–Ω–¥
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞: 1-3 —Å–µ–∫—É–Ω–¥—ã
3. –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: 2-5 —Å–µ–∫—É–Ω–¥ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞)
4. –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Qdrant: 1-2 —Å–µ–∫—É–Ω–¥—ã

---

## üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑!**

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `upsert` (update + insert):
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤—è—Ç—Å—è
- –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤—è—Ç—Å—è

**–î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:**

```python
from qdrant_helper import get_qdrant_client

client = get_qdrant_client()

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏ –∏–∑ RAG –ø–∞–ø–∫–∏
client.delete(
    collection_name="hr2137_bot_knowledge_base",
    points_selector={
        "filter": {
            "must": [
                {"key": "source", "match": {"value": "yadisk_rag_folder"}}
            ]
        }
    }
)

print("‚úÖ –û—á–∏—â–µ–Ω–æ!")
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Qdrant –¥–ª—è RAG!**

```bash
chmod +x start_rag_loader.sh
./start_rag_loader.sh
```

**–§–∞–π–ª—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –±–æ—Ç–µ! üöÄ**
