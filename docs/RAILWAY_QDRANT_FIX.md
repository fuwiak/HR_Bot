# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Qdrant –≤ Railway

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ Railway –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
[Errno 111] Connection refused
‚ö†Ô∏è QDRANT_HOST –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π Qdrant: http://localhost:6333
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–°–µ—Ä–≤–∏—Å—ã –ø—ã—Ç–∞—é—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Qdrant –ø–æ `localhost:6333`, –Ω–æ –≤ Railway Qdrant - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º URL.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `RAILWAY_SERVICE_QDRANT_URL` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞. –ö–æ–¥ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### 2. –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–í Railway Dashboard –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Qdrant:

**Settings ‚Üí Variables ‚Üí Add Variable:**

```env
QDRANT_HOST=https://qdrant-production-bf97.up.railway.app
```

–ò–ª–∏ –¥–ª—è private domain:
```env
QDRANT_HOST=qdrant.railway.internal
QDRANT_PORT=6333
```

### 3. –ö–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ Qdrant:

- ‚úÖ **Telegram Bot** (HR_Bot) - –Ω—É–∂–µ–Ω QDRANT_HOST (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RAILWAY_SERVICE_QDRANT_URL)
- ‚úÖ **Backend API** - –Ω—É–∂–µ–Ω QDRANT_HOST (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RAILWAY_SERVICE_QDRANT_URL)
- ‚ùå **Mini App (Frontend)** - –ù–ï –Ω—É–∂–µ–Ω QDRANT_HOST

## üõ† –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

1. **services/rag/qdrant_helper.py** - –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
   - `RAILWAY_SERVICE_QDRANT_URL` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è Railway)
   - `QDRANT_HOST` (—Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
   - `qdrant.railway.internal` (private domain fallback)
   - `localhost:6333` (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

2. **telegram_bot/config.py** - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ Railway (warning –≤–º–µ—Å—Ç–æ error)

## üìã –ß–µ–∫–ª–∏—Å—Ç

- [ ] QDRANT_HOST –¥–æ–±–∞–≤–ª–µ–Ω –≤ Telegram Bot —Å–µ—Ä–≤–∏—Å (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è RAILWAY_SERVICE_QDRANT_URL)
- [ ] QDRANT_HOST –¥–æ–±–∞–≤–ª–µ–Ω –≤ Backend API —Å–µ—Ä–≤–∏—Å (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è RAILWAY_SERVICE_QDRANT_URL)
- [ ] –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã
- [ ] Qdrant –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ "Connection refused"

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `RAILWAY_SERVICE_<SERVICE_NAME>_URL` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞. –ö–æ–¥ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `RAILWAY_SERVICE_QDRANT_URL` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞.
