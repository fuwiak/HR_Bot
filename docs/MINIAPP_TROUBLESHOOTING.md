# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Mini App –Ω–∞ Railway

## ‚ùå –û—à–∏–±–∫–∞: "Application failed to respond"

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã.

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å Dockerfile

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Dockerfile –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Dockerfile:
  - –ï—Å–ª–∏ Dockerfile –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞: `Dockerfile.frontend`
  - –ï—Å–ª–∏ Dockerfile –≤ `frontend/`: `frontend/Dockerfile`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Railway Dashboard —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π **Dockerfile Path**

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É.

**–†–µ—à–µ–Ω–∏–µ:**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Frontend —Å–µ—Ä–≤–∏—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
```env
PORT=3000
HOSTNAME=0.0.0.0
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å build

**–ü—Ä–æ–±–ª–µ–º–∞:** Next.js –Ω–µ –º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –≤ Railway Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
   ```bash
   # –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
   cd frontend
   npm install
   npm run build
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `next.config.js` —Å–æ–¥–µ—Ä–∂–∏—Ç `output: 'standalone'`

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ backend.

**–†–µ—à–µ–Ω–∏–µ:**
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Frontend —Å–µ—Ä–≤–∏—Å–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
```env
PORT=3000
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://your-backend-service.up.railway.app
BACKEND_URL=https://your-backend-service.up.railway.app
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `your-backend-service.up.railway.app` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ Backend —Å–µ—Ä–≤–∏—Å–∞.

### 5. –ü—Ä–æ–±–ª–µ–º—ã —Å standalone —Ä–µ–∂–∏–º–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** Next.js –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π standalone build.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `next.config.js`:
   ```js
   output: 'standalone'
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Dockerfile –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è —Ñ–∞–π–ª—ã:
   ```dockerfile
   COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
   COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static
   COPY --from=builder --chown=nextjs:nodejs /app/public ./public
   ```

### 6. –ü—Ä–æ–±–ª–µ–º—ã —Å HTTPS –¥–æ–º–µ–Ω–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** Mini App —Ç—Ä–µ–±—É–µ—Ç HTTPS, –Ω–æ –¥–æ–º–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Frontend —Å–µ—Ä–≤–∏—Å –≤ Railway Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Networking**
3. –í–∫–ª—é—á–∏—Ç–µ **Public Domain**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL

### 7. –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `package.json` - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `next`
- `react`
- `react-dom`
- `@twa-dev/sdk`

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ Frontend —Å–µ—Ä–≤–∏—Å
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Build Logs** –∏ **Deploy Logs**

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] Dockerfile Path –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Railway
- [ ] PORT=3000 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] NEXT_PUBLIC_API_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Backend URL
- [ ] BACKEND_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Backend URL
- [ ] Public Domain –≤–∫–ª—é—á–µ–Ω –¥–ª—è Frontend —Å–µ—Ä–≤–∏—Å–∞
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ deploy –ª–æ–≥–∏)
- [ ] URL –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `https://your-frontend.up.railway.app`)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
cd frontend
npm install
npm run build
npm start
```

–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/miniapp` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## üìù –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

### "Cannot find module 'server.js'"
**–ü—Ä–∏—á–∏–Ω–∞:** Standalone build –Ω–µ —Å–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `output: 'standalone'` –≤ `next.config.js`.

### "Port 3000 is already in use"
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤.
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PORT=3000 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

### "ECONNREFUSED" –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π BACKEND_URL.
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ BACKEND_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL Backend —Å–µ—Ä–≤–∏—Å–∞.

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –°–¥–µ–ª–∞–π—Ç–µ commit –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è build –∏ deploy
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ –≤ Railway Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (Backend, Frontend) —Ä–∞–±–æ—Ç–∞—é—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Backend API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É URL
