# Google Sheets Интеграция - Краткое описание

## Что сделано

✅ **Чтение данных из Google Sheets**
- Бот читает услуги из листа "Ценник" вашей таблицы
- Автоматически определяет мастеров (Роман, Анжела) из колонок
- Поддерживает диапазоны цен (например: "1000–2500")
- Кэширует данные на 5 минут для оптимизации

✅ **Запись записей в Google Sheets**
- Все новые записи добавляются в лист "Запись"
- Лист создается автоматически при первой записи
- Каждая запись - новая строка с полной информацией

✅ **Отслеживание изменений**
- Кэш обновляется автоматически каждые 5 минут
- При следующем запросе бот получит актуальные данные из таблицы

## Структура таблицы "Ценник"

| Колонка | Описание | Пример |
|---------|----------|--------|
| A | Тип услуги / Отдел | HR-услуги |
| B | Услуга название | Консультация по найму |
| C | Мастер 1 | Роман |
| D | Мастер 2 | (пусто) |
| E | Цена | 1500 или 1000–2500 |
| F | Время оказания (мин) | 60 |
| G | Доп. услуги | Тонировка бороды |

## Структура листа "Запись" (создается автоматически)

| Колонка | Описание |
|---------|----------|
| A | Дата создания |
| B | ID записи |
| C | Дата записи |
| D | Время записи |
| E | Мастер |
| F | Услуга |
| G | Имя клиента |
| H | Телефон |
| I | Цена |
| J | Статус |
| K | Комментарий |

## Настройка

### Локально:
1. Создайте Service Account в Google Cloud Console
2. Скачайте credentials.json
3. Поделитесь таблицей с email Service Account (права: Editor)
4. Добавьте в `.env`:
   ```
   GOOGLE_SHEETS_CREDENTIALS_PATH=./credentials.json
   GOOGLE_SHEETS_SPREADSHEET_ID=1NF25EWqRxjdNTKk4VFVAYZGIOlVFfaktpEvvj1bRXKU
   ```

### На Railway:
1. Создайте Service Account и скачайте credentials.json
2. Поделитесь таблицей с email Service Account
3. Откройте credentials.json и скопируйте весь JSON
4. В Railway Dashboard → Variables добавьте:
   - **Имя**: `GOOGLE_SHEETS_CREDENTIALS_JSON`
   - **Значение**: Вставьте весь JSON из credentials.json (как есть, без base64)
5. Spreadsheet ID уже установлен по умолчанию

Подробная инструкция: `GOOGLE_SHEETS_SETUP.md`

