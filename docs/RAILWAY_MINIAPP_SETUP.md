# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App –Ω–∞ Railway

## üìã –û–±–∑–æ—Ä

Telegram Mini App (Web App) - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ UI –¥–ª—è Telegram –±–æ—Ç–æ–≤. –í–º–µ—Å—Ç–æ inline keyboard buttons, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–µ—Å—è –ø—Ä—è–º–æ –≤ Telegram.

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ Railway

### 1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS –¥–æ–º–µ–Ω –¥–ª—è Frontend**

Mini App **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Ç—Ä–µ–±—É–µ—Ç HTTPS. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTPS –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Frontend —Å–µ—Ä–≤–∏—Å –≤ Railway Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Networking**
3. –í–∫–ª—é—á–∏—Ç–µ **Public Domain** (Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç HTTPS –¥–æ–º–µ–Ω)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://frontend-production-xxxx.up.railway.app`)

### 2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

#### –í Frontend —Å–µ—Ä–≤–∏—Å–µ:
```env
PORT=3000
NODE_ENV=production
NEXT_PUBLIC_API_URL=https://your-backend-service.up.railway.app
BACKEND_URL=https://your-backend-service.up.railway.app
```

#### –í Telegram Bot —Å–µ—Ä–≤–∏—Å–µ:
```env
TELEGRAM_TOKEN=your_bot_token
MINI_APP_URL=https://your-frontend-service.up.railway.app/miniapp
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ FRONTEND_URL:
FRONTEND_URL=https://your-frontend-service.up.railway.app
```

**–í–∞–∂–Ω–æ:** `MINI_APP_URL` –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ `/miniapp` –ø—É—Ç—å –≤–∞—à–µ–≥–æ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Ä–≤–∏—Å–æ–≤**

–£ –≤–∞—Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–µ—Ä–≤–∏—Å–∞:
1. **Telegram Bot** - –ø–æ—Ä—Ç 8080
2. **Backend API** - –ø–æ—Ä—Ç 8081  
3. **Frontend** - –ø–æ—Ä—Ç 3000

### 4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å BotFather**

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ **Bot Settings** ‚Üí **Menu Button**
5. –í—ã–±–µ—Ä–∏—Ç–µ **Configure Menu Button**
6. –í–≤–µ–¥–∏—Ç–µ:
   - **Button Text:** `üåê –û—Ç–∫—Ä—ã—Ç—å Mini App` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç)
   - **URL:** `https://your-frontend-service.up.railway.app/miniapp`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ö–Ω–æ–ø–∫–∞ Web App —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –º–µ–Ω—é `/start` –µ—Å–ª–∏ `MINI_APP_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Mini App

```
frontend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îî‚îÄ‚îÄ miniapp/
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Mini App
‚îÇ       ‚îî‚îÄ‚îÄ page.module.css   # –°—Ç–∏–ª–∏
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ miniapp/
        ‚îú‚îÄ‚îÄ MainMenu.tsx      # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        ‚îú‚îÄ‚îÄ KnowledgeBase.tsx # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
        ‚îú‚îÄ‚îÄ Projects.tsx      # –ü—Ä–æ–µ–∫—Ç—ã
        ‚îú‚îÄ‚îÄ Tools.tsx         # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
        ‚îú‚îÄ‚îÄ Help.tsx          # –ü–æ–º–æ—â—å
        ‚îî‚îÄ‚îÄ Chat.tsx          # –ß–∞—Ç —Å AI
```

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **@twa-dev/sdk** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK –¥–ª—è Telegram Web Apps
- **Next.js 14** - React framework
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è

### API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

Mini App –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ API endpoints, —á—Ç–æ –∏ –æ–±—ã—á–Ω—ã–π frontend:
- `/api/rag/search` - –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- `/api/rag/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/api/rag/docs` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `/api/demo/proposal` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ö–ü

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Frontend:
```bash
cd frontend
npm install
npm run dev
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è HTTPS:
```bash
ngrok http 3000
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ BotFather:
- URL: `https://your-ngrok-url.ngrok.io/miniapp`

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram:
- –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é –∏–ª–∏ `/start`
- –ù–∞–∂–º–∏—Ç–µ "üåê –û—Ç–∫—Ä—ã—Ç—å Mini App"

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### CORS –∏ Security Headers

Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ headers –¥–ª—è Mini App:
- `X-Frame-Options: SAMEORIGIN`
- `Content-Security-Policy` —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è Telegram –¥–æ–º–µ–Ω–æ–≤

### –í–∞–ª–∏–¥–∞—Ü–∏—è initData

Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `initData` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ. –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –ø–æ–¥–ø–∏—Å—å –Ω–∞ backend.

### –†–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

Mini App –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- Code splitting
- Lazy loading
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üì± –î–æ—Å—Ç—É–ø –∫ Mini App

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å Mini App:
1. –ß–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ –º–µ–Ω—é –±–æ—Ç–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ BotFather)
2. –ß–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "üåê –û—Ç–∫—Ä—ã—Ç—å Mini App" –≤ `/start` –º–µ–Ω—é
3. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ —á–µ—Ä–µ–∑ `WebApp.openLink()` –≤ –∫–æ–¥–µ

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Mini App URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Telegram:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É Mini App
3. –ï—Å–ª–∏ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç
   - URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - Headers –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   - BotFather –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:
–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É **"Application failed to respond"**, —Å–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:
üëâ [MINIAPP_TROUBLESHOOTING.md](./MINIAPP_TROUBLESHOOTING.md)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Telegram Mini Apps Documentation](https://core.telegram.org/bots/webapps)
- [@twa-dev/sdk Documentation](https://github.com/twa-dev/sdk)
- [Next.js Documentation](https://nextjs.org/docs)

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] Frontend —Å–µ—Ä–≤–∏—Å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ Railway
- [ ] HTTPS –¥–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `MINI_APP_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Telegram Bot —Å–µ—Ä–≤–∏—Å–µ
- [ ] BotFather –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é)
- [ ] API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ Frontend
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ Telegram
- [ ] –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å –∫—Ä–∞—Å–∏–≤–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä—è–º–æ –≤ Telegram, –≤–º–µ—Å—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö inline –∫–Ω–æ–ø–æ–∫!
