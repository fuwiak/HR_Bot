# Как запустить веб-интерфейс

Веб-интерфейс доступен по адресу **http://localhost:8081** и предоставляет демонстрационные возможности для инвесторов.

## Способы запуска

### Способ 1: Автоматический запуск (рекомендуется)

Веб-интерфейс автоматически запускается вместе с ботом при использовании скриптов:

#### Локально:
```bash
./run_local.sh
```

#### Через Docker:
```bash
docker-compose up
```

#### В Railway:
Автоматически запускается через `start.sh`

### Способ 2: Отдельный запуск веб-интерфейса

Если бот уже запущен и нужно запустить только веб-интерфейс:

```bash
# Активируйте виртуальное окружение (если используете)
source .venv/bin/activate

# Запустите веб-интерфейс
python web_interface.py
```

Веб-интерфейс будет доступен по адресу: **http://localhost:8081**

### Способ 3: С указанием порта

```bash
WEB_INTERFACE_PORT=8081 python web_interface.py
```

## Проверка работы

### 1. Откройте в браузере:
```
http://localhost:8081
```

### 2. Проверьте health endpoint:
```bash
curl http://localhost:8081/health
```

Ответ должен быть:
```json
{
  "status": "ok",
  "timestamp": "2024-12-14T...",
  "integrations_available": true
}
```

## Доступные функции

### Главная страница
- `http://localhost:8081/` - демонстрационная страница

### Архитектура системы
- `http://localhost:8081/architecture` - визуализация архитектуры

### RAG База знаний
- `GET /rag/search?query=подбор персонала` - поиск в базе знаний
- `GET /rag/stats` - статистика базы знаний
- `GET /rag/docs?limit=50` - список документов

### Генерация КП
- `POST /demo/proposal` - генерация коммерческого предложения
  ```json
  {
    "request": "нужна помощь с подбором HR-менеджера"
  }
  ```

### Отправка Email
- `POST /demo/email` - отправка тестового email
  ```
  recipient: email@example.com
  subject: Тема письма
  body: Текст письма
  ```

## Отключение веб-интерфейса

Если нужно запустить только бота без веб-интерфейса:

```bash
DISABLE_WEB_INTERFACE=true ./run_local.sh
```

Или в `.env` файле:
```
DISABLE_WEB_INTERFACE=true
```

## Настройка порта

По умолчанию используется порт **8081**. Чтобы изменить:

### В `.env` файле:
```
WEB_INTERFACE_PORT=8081
```

### При запуске:
```bash
WEB_INTERFACE_PORT=3000 python web_interface.py
```

## Устранение проблем

### Порт уже занят

Если порт 8081 занят, измените порт:
```bash
WEB_INTERFACE_PORT=8082 python web_interface.py
```

### Модули не найдены

Убедитесь, что все зависимости установлены:
```bash
pip install -r requirements.txt
```

Нужные пакеты:
- `fastapi`
- `uvicorn[standard]`
- `jinja2`
- `python-multipart`

### Ошибка подключения к Qdrant

Веб-интерфейс будет работать, но некоторые функции (RAG поиск) могут быть недоступны. Проверьте переменные окружения:
- `QDRANT_URL`
- `QDRANT_API_KEY`

## Примеры использования

### Поиск в RAG через curl:
```bash
curl "http://localhost:8081/rag/search?query=подбор%20персонала&limit=5"
```

### Генерация КП через curl:
```bash
curl -X POST "http://localhost:8081/demo/proposal" \
  -H "Content-Type: application/json" \
  -d '{"request": "нужна помощь с подбором HR-менеджера"}'
```

### Статистика RAG:
```bash
curl "http://localhost:8081/rag/stats"
```

## Для инвесторов

Веб-интерфейс демонстрирует:
1. ✅ Работу RAG базы знаний (поиск, статистика, документы)
2. ✅ Генерацию коммерческих предложений
3. ✅ Интеграцию с email
4. ✅ Визуализацию архитектуры системы

Все функции доступны через удобный веб-интерфейс без необходимости использования Telegram бота.
























