# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ LLM –æ—à–∏–±–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

## –ü—Ä–æ–±–ª–µ–º—ã

1. **401 –æ—à–∏–±–∫–∞ –æ—Ç OpenRouter**: "No cookie auth credentials found"
2. **SSL –æ—à–∏–±–∫–∞ –æ—Ç GigaChat**: "certificate verify failed: self-signed certificate"
3. **–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã**: "how are you?" –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ 401 –æ—à–∏–±–∫–∞ OpenRouter:

- –û—á–∏—Å—Ç–∫–∞ API –∫–ª—é—á–∞ –æ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏: `HTTP-Referer` –∏ `X-Title`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `APP_URL` –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ SSL –æ—à–∏–±–∫–∞ GigaChat:

- –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è GigaChat
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ssl.CERT_NONE` –¥–ª—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤:

- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –û—Ç–≤–µ—Ç —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ HR –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- Fallback –Ω–∞ CONSULTING_PROMPT –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### `llm_helper.py`:

```python
# –û—á–∏—Å—Ç–∫–∞ API –∫–ª—é—á–∞
api_key_clean = OPENROUTER_API_KEY.strip().replace('\n', '').replace('\r', '')

# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
headers = {
    "Authorization": f"Bearer {api_key_clean}",
    "HTTP-Referer": app_url,
    "X-Title": "HR2137 Bot RAG"
}

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ SSL –¥–ª—è GigaChat
ssl_context = ssl.create_default_context()
ssl_context.check_hostname = False
ssl_context.verify_mode = ssl.CERT_NONE
```

### `app.py`:

```python
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
if is_general_question:
    answer = (
        "–ü—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ! üòä\n\n"
        "–ù–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ —è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ê–Ω–∞—Å—Ç–∞—Å–∏–∏ –ù–æ–≤–æ—Å—ë–ª–æ–≤–æ–π..."
    )
else:
    # –û–±—ã—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ RAG –∏ LLM
    answer = await generate_with_fallback(...)
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

1. ‚úÖ OpenRouter —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (401 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
2. ‚úÖ GigaChat —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ fallback (SSL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)
3. ‚úÖ –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ HR –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
4. ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ

---

**–ì–æ—Ç–æ–≤–æ! –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ**
