# üìÇ Yandex Disk Indexer - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Qdrant Cloud

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**Yandex Disk Indexer** - —Ñ–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- üîç –°–∫–∞–Ω–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ
- üìÑ –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã
- üß© –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏
- üî¢ –°–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- üíæ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Qdrant Cloud

**–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à—É –ø–∞–ø–∫—É:** https://disk.yandex.ru/d/-BtoZgh5VMdsPQ

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
YANDEX_TOKEN=your_yandex_token_here
QDRANT_URL=https://your-cluster.aws.cloud.qdrant.io
QDRANT_API_KEY=your_qdrant_key
OPENAI_API_KEY=your_openai_key  # –î–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
YADISK_WATCH_FOLDERS=/,/–î–æ–∫—É–º–µ–Ω—Ç—ã,/–ö–ü  # –ü–∞–ø–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
YADISK_SCAN_INTERVAL=300               # –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–µ–∫—É–Ω–¥—ã)
YADISK_MAX_FILE_SIZE=50                # –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ú–ë)
QDRANT_COLLECTION=hr_knowledge_base    # –ö–æ–ª–ª–µ–∫—Ü–∏—è Qdrant
```

---

## üì¶ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –§–æ—Ä–º–∞—Ç | –†–∞—Å—à–∏—Ä–µ–Ω–∏—è | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|--------|-----------|-----------|
| –¢–µ–∫—Å—Ç | `.txt`, `.md` | ‚úÖ UTF-8, CP1251 |
| PDF | `.pdf` | ‚úÖ PyPDF2 |
| Word | `.docx` | ‚úÖ python-docx |
| Excel | `.xlsx`, `.xls` | ‚úÖ pandas |
| –î–∞–Ω–Ω—ã–µ | `.csv`, `.json`, `.xml` | ‚úÖ –¢–µ–∫—Å—Ç–æ–≤–∞—è |

‚ö†Ô∏è **–ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:** `.doc` (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç Word)

---

## üöÄ –ó–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ (—Ñ–æ–Ω)

```bash
# –ó–∞–ø—É—Å–∫
chmod +x start_yadisk_indexer.sh
./start_yadisk_indexer.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
ps aux | grep yadisk_indexer

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f logs/yadisk_indexer.out
tail -f yadisk_indexer.log

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
chmod +x stop_yadisk_indexer.sh
./stop_yadisk_indexer.sh
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Systemd —Å–µ—Ä–≤–∏—Å (Linux)

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç–∏ –≤ yadisk-indexer.service
sudo nano yadisk-indexer.service

# 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ systemd
sudo cp yadisk-indexer.service /etc/systemd/system/

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd
sudo systemctl daemon-reload

# 4. –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable yadisk-indexer

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
sudo systemctl start yadisk-indexer

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status yadisk-indexer

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u yadisk-indexer -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop yadisk-indexer
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -f Dockerfile.yadisk -t yadisk-indexer .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  --name yadisk-indexer \
  --restart unless-stopped \
  --env-file .env \
  yadisk-indexer

# –õ–æ–≥–∏
docker logs -f yadisk-indexer

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker stop yadisk-indexer

# –£–¥–∞–ª–µ–Ω–∏–µ
docker rm yadisk-indexer
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: Railway

–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –≤ Railway:

```toml
# .railway/yadisk-indexer.toml
[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile.yadisk"

[deploy]
startCommand = "python -u yadisk_indexer.py"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
```

**–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞:**
```bash
railway service create yadisk-indexer
railway up --service yadisk-indexer
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–æ–∫

```python
# –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
for folder in WATCH_FOLDERS:
    files = await scan_folder(folder)
    # –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
```

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç?)
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (< 50 –ú–ë?)
- –•–µ—à —Ñ–∞–π–ª–∞ (—É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω?)
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞

```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:
1. –°–∫–∞—á–∏–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞)
3. –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ (1000 —Å–∏–º–≤–æ–ª–æ–≤)
4. –°–æ–∑–¥–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
5. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Qdrant Cloud
```

### 4. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ Qdrant

–ö–∞–∂–¥—ã–π —á–∞–Ω–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:

```json
{
  "text": "—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–∞–Ω–∫–∞",
  "source": "yadisk",
  "file_path": "/disk.yandex.ru/d/-BtoZgh5VMdsPQ/file.pdf",
  "file_name": "file.pdf",
  "file_hash": "md5_hash",
  "chunk_index": 0,
  "total_chunks": 15,
  "modified": "2024-12-19T10:30:00Z",
  "indexed_at": "2024-12-19T11:00:00Z"
}
```

---

## üìã –õ–æ–≥–∏

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

```log
2024-12-19 11:00:00 [INFO] ============================================================
2024-12-19 11:00:00 [INFO] üîÑ –ò–¢–ï–†–ê–¶–ò–Ø #1 - 2024-12-19 11:00:00
2024-12-19 11:00:00 [INFO] ============================================================

2024-12-19 11:00:01 [INFO] üìÇ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: /
2024-12-19 11:00:02 [INFO] üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏: /
2024-12-19 11:00:03 [INFO] ‚úÖ –ù–∞–π–¥–µ–Ω–æ 5 —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ /

2024-12-19 11:00:04 [INFO] üìä –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 5
2024-12-19 11:00:04 [INFO] üìä –£–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 0

2024-12-19 11:00:05 [INFO] üîß –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É 5 —Ñ–∞–π–ª–æ–≤...

2024-12-19 11:00:06 [INFO] üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: –¥–æ–≥–æ–≤–æ—Ä.pdf
2024-12-19 11:00:07 [INFO] üìÑ –û–±—Ä–∞–±–æ—Ç–∫–∞: –¥–æ–≥–æ–≤–æ—Ä.pdf
2024-12-19 11:00:08 [INFO] ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ 3456 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –¥–æ–≥–æ–≤–æ—Ä.pdf
2024-12-19 11:00:09 [INFO] üì¶ –°–æ–∑–¥–∞–Ω–æ 4 —á–∞–Ω–∫–æ–≤ –∏–∑ –¥–æ–≥–æ–≤–æ—Ä.pdf
2024-12-19 11:00:15 [INFO] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ 4 —Ç–æ—á–µ–∫ (1-4 –∏–∑ 4) –¥–ª—è –¥–æ–≥–æ–≤–æ—Ä.pdf
2024-12-19 11:00:15 [INFO] üéâ –§–∞–π–ª –¥–æ–≥–æ–≤–æ—Ä.pdf —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω (4 —Ç–æ—á–µ–∫)
2024-12-19 11:00:15 [INFO] ‚úÖ [1] –£—Å–ø–µ—à–Ω–æ: –¥–æ–≥–æ–≤–æ—Ä.pdf

2024-12-19 11:00:17 [INFO] üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: –æ—Ç—á–µ—Ç.xlsx
...

2024-12-19 11:05:00 [INFO] ‚úÖ –ò—Ç–µ—Ä–∞—Ü–∏—è #1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2024-12-19 11:05:00 [INFO] ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 5
2024-12-19 11:05:00 [INFO] üìä –í—Å–µ–≥–æ –≤ –∫–µ—à–µ: 5 —Ñ–∞–π–ª–æ–≤

2024-12-19 11:05:00 [INFO] ‚è≥ –°–ª–µ–¥—É—é—â–µ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 300 —Å–µ–∫—É–Ω–¥...
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤–∞—à–µ–π –ø–∞–ø–∫–∏

–í–∞—à–∞ —Å—Å—ã–ª–∫–∞: `https://disk.yandex.ru/d/-BtoZgh5VMdsPQ`

### –û–ø—Ü–∏—è 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤—Å—é –ø–∞–ø–∫—É

```env
# –í .env
YADISK_WATCH_FOLDERS=/
```

### –û–ø—Ü–∏—è 2: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–¥–ø–∞–ø–∫–∏

```env
# –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –≤–∞—à–µ–π —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω–æ–π –ø–∞–ø–∫–µ –µ—Å—Ç—å:
# - –î–æ–∫—É–º–µ–Ω—Ç—ã/
# - –ö–ü/
# - –î–æ–≥–æ–≤–æ—Ä—ã/

YADISK_WATCH_FOLDERS=/–î–æ–∫—É–º–µ–Ω—Ç—ã,/–ö–ü,/–î–æ–≥–æ–≤–æ—Ä—ã
```

### –û–ø—Ü–∏—è 3: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥

–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `yadisk_indexer.py`:

```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ scan_folder()
if item_type == "dir":
    subfolder_path = item.get("path", "")
    log.info(f"üìÅ –ù–∞–π–¥–µ–Ω–∞ –ø–æ–¥–ø–∞–ø–∫–∞: {subfolder_path}")
    # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
    subfiles = await scan_folder(subfolder_path, processed_hashes)
    files_to_process.extend(subfiles)
    continue
```

---

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

### –ë—ã—Å—Ç—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –º–∏–Ω—É—Ç–∞)
```env
YADISK_SCAN_INTERVAL=60
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ (5 –º–∏–Ω—É—Ç)
```env
YADISK_SCAN_INTERVAL=300
```

### –†–µ–¥–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (1 —á–∞—Å)
```env
YADISK_SCAN_INTERVAL=3600
```

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/yadisk_indexer.out

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 yadisk_indexer.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" yadisk_indexer.log
grep "‚ùå" logs/yadisk_indexer.out

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
grep "‚úÖ.*–£—Å–ø–µ—à–Ω–æ:" logs/yadisk_indexer.out | wc -l
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Qdrant

```python
from qdrant_helper import get_qdrant_client

client = get_qdrant_client()

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
count = client.count(collection_name="hr_knowledge_base")
print(f"–í—Å–µ–≥–æ —Ç–æ—á–µ–∫: {count.count}")

# –ü–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
results = client.scroll(
    collection_name="hr_knowledge_base",
    scroll_filter={
        "must": [
            {"key": "source", "match": {"value": "yadisk"}}
        ]
    },
    limit=10
)

for point in results[0]:
    print(f"–§–∞–π–ª: {point.payload['file_name']}")
    print(f"–ß–∞–Ω–∫: {point.payload['chunk_index']} –∏–∑ {point.payload['total_chunks']}")
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
echo $YANDEX_TOKEN

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Qdrant
python3 -c "from qdrant_helper import get_qdrant_client; print(get_qdrant_client())"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
# –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç –≤ .env:
YADISK_MAX_FILE_SIZE=100

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
# –î–æ–±–∞–≤—å—Ç–µ –≤ SUPPORTED_EXTENSIONS –≤ yadisk_indexer.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install PyPDF2 python-docx pandas openpyxl
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏

```bash
# –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
# –í yadisk_indexer.py:
batch_size = 50  # –≤–º–µ—Å—Ç–æ 100
```

---

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ —Ñ–∞–π–ª–æ–≤

```python
# –£–≤–µ–ª–∏—á—å—Ç–µ batch_size
batch_size = 200

# –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤
chunk_size = 500
```

### –î–ª—è –±—ã—Å—Ç—Ä–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

```python
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–¥–æ–±–∞–≤—å—Ç–µ –≤ process_files)
import asyncio

tasks = []
for file_info in files:
    task = asyncio.create_task(process_single_file(file_info))
    tasks.append(task)

results = await asyncio.gather(*tasks, return_exceptions=True)
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env –≤ Git**
   ```bash
   echo ".env" >> .gitignore
   ```

2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Ç–æ–∫–µ–Ω–∞–º**
   ```bash
   chmod 600 .env
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ read-only —Ç–æ–∫–µ–Ω** –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

- [ ] –¢–æ–∫–µ–Ω YANDEX_TOKEN –≤ .env
- [ ] Qdrant credentials –≤ .env
- [ ] OpenAI API key –≤ .env (–¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`
- [ ] –£–∫–∞–∑–∞–Ω—ã –ø–∞–ø–∫–∏ –≤ YADISK_WATCH_FOLDERS
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª YADISK_SCAN_INTERVAL
- [ ] –ó–∞–ø—É—â–µ–Ω –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä: `./start_yadisk_indexer.sh`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏: `tail -f logs/yadisk_indexer.out`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Qdrant

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä –±—É–¥–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞—Ç—å –≤ Qdrant Cloud
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–í–∞—à–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ —á–µ—Ä–µ–∑ RAG –≤ –±–æ—Ç–µ! üöÄ**
